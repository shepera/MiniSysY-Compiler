# Lab1

林璐霞 18377149

- 简要介绍，你在完成这个 lab 中的各个 part 时都做了哪些工作，为什么要用（你采用的）这种方法完成。
- 实验指导中每个 part 中留下的思考题的回答。（鼓励但不强制，这不会成为评分依据）
- 如果你复用或者借鉴了参考代码或其他实现（关于借鉴与抄袭的界定请见诚信页），请明确写出你借鉴了哪些内容。



## Part1

### 实现

四个代码文件：

* `lexer.rkt`：使用正则表达式去匹配token，得到一串token序列。每个token用一个如下结构体表示

  ```lisp
  (struct token 
          (type ; token的类型，如：Number，Ident
           value); token的值，主要用于Number类型
          #:transparent)
  ```

* `parser.rkt`：使用lexer生成的token，使用递归下降法，分析得到一个抽象语法树。所有的语法规则保存在`./grammer/grammer`中。语法树的储存大概如下：

  ```lisp
  ; AST ( E . list( sub-AST ))
  ; Example:
  ;    E
  ; |--|--|
  ; a  F  c
  ;    |
  ;    b
  ; (E . (token (F . token) token)
  ```

* `ir-list-generator.rkt`：根据抽象语法树生成（不完整的）中间代码。计划每个语句用一个列表表示，每个Block再包一个列表。这一步生成的中间代码还缺少跳转，计划下一步是根据完成的ir-list，拆括号，增加跳转语句。但这次可以不需要。

* `print-llvm-ir.rkt`：将生成好的ir语句列表打印出来。

## Part2

### 实现

完成了注释的消除。放到词法分析中完成，因为词法分析用的正则表达式来完成，注释的匹配就可以非常容易的通过增加几条正则来完成。

### 思考题

注释的消除完全放在了词法分析中。

当词法分析匹配到`//`时，就判断是注释，此时继续匹配换行符或EOF。

当词法分析匹配到`/*`时，就判断是注释，此时继续匹配`*/`。

当匹配注释时，词法分析没有新的token输出。

